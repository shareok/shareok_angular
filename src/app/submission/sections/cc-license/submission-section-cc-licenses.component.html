<p>If you wish, you may add a <a href='https://creativecommons.org/'>Creative Commons</a> License to your item. <strong>Creative Commons licenses govern what people who read your work may then do with it. You will still retain your copyright with most Creative Commons licenses.</strong></p>

<div class="mb-4 ccLicense-select">
  <span *ngIf="!submissionCcLicenses">
    <ds-themed-loading></ds-themed-loading>
  </span>
  <ng-container class="menu">
    <div *ngFor="let license of submissionCcLicenses; let i = index">
      <input type="radio"
              class="mr-1"
              name="license.name"
              (change)="onSelectChoice(CC_CHOOSERS[i].id)">
      <span>{{ CC_CHOOSERS[i].choice }}</span>
    </div>
    <input type="radio"
            class="mr-1"
            name="license.name"
            (change)="onSelectChoice(CC_CHOOSERS[2].id)">
    <span>{{ CC_CHOOSERS[2].choice }}</span>
  </ng-container>
</div>


<ng-container *ngIf="selectChoice=='c0'; else licensetypes">
  <span *ngIf="!submissionCcLicenses">
    <ds-themed-loading></ds-themed-loading>
  </span>
  <p>License Type:</p>
  <div class="col">
    <p></p>
    <div class="col-sm-12">
      <div>
        <input name="licensetype_chooser" type="radio" class="mr-1" value="cc0"
          (change)="selectCcLicense(submissionCcLicenses[0])">
          <span>CC0</span>
      </div>
      <div>
        <input name="licensetype_chooser" type="radio" class="mr-1" value="cc1"
        (change)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[1], submissionCcLicenses[1].fields[1].enums[0])"
        (click)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[0], submissionCcLicenses[1].fields[0].enums[0])">
        <span>CC BY</span>
      </div>
      <div>
        <input name="licensetype_chooser" type="radio" class="mr-1" value="cc2"
          (change)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[1], submissionCcLicenses[1].fields[1].enums[1])"
          (click)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[0], submissionCcLicenses[1].fields[0].enums[0])">
          <span>CC BY-SA</span>
      </div>
      <div><input name="licensetype_chooser" type="radio" class="mr-1" value="cc3"
          (change)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[1], submissionCcLicenses[1].fields[1].enums[0])"
          (click)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[0], submissionCcLicenses[1].fields[0].enums[1])">
          <span>CC BY-NC</span>
      </div>
      <div><input name="licensetype_chooser" type="radio" class="mr-1" value="cc4"
          (change)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[1], submissionCcLicenses[1].fields[1].enums[2])"
          (click)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[0], submissionCcLicenses[1].fields[0].enums[0])">
          <span>CC BY-ND</span>
      </div>
      <div><input name="licensetype_chooser" type="radio" class="mr-1" value="cc5"
          (change)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[1], submissionCcLicenses[1].fields[1].enums[1])"
          (click)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[0], submissionCcLicenses[1].fields[0].enums[1])">
          <span>CC BY-NC-SA</span>
      </div>
      <div><input name="licensetype_chooser" type="radio" class="mr-1" value="cc6"
          (change)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[1], submissionCcLicenses[1].fields[1].enums[2])"
          (click)="selectChooser(submissionCcLicenses[1], submissionCcLicenses[1].fields[0], submissionCcLicenses[1].fields[0].enums[1])">
          <span>CC BY-NC-ND</span>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #licensetypes>
    <ng-container *ngIf="selectChoice=='c1'; else nolicense">
      {{ selectCcLicense(submissionCcLicenses[1]) }}
      <div *ngFor="let field of getSelectedCcLicense().fields"
           class="mb-4">
           {{ field.id }}
        <div class="d-flex flex-row">
          <div class="font-weight-bold {{ field.id }}">
            {{ field.label }}
          </div>
          <button
            class="btn btn-outline-info btn-sm ml-2"
            (click)="openInfoModal(infoModal)">
            <i class="fas fa-question"></i>
          </button>
        </div>

        <ng-template #infoModal>

          <div>

            <div class="modal-header mb-4 ">
              <div>
                <h4>
                  {{ field.label }}
                </h4>
                <div [innerHTML]="field.description"></div>
              </div>
              <button type="button" class="close"
                      (click)="closeInfoModal()" aria-label="Close">
                <span aria-hidden="true">Ã—</span>
              </button>
            </div>

            <div class="modal-body">
              <div *ngFor="let value of field.enums"
                   class="mb-4">
                <h5>
                  {{ value.label }}
                </h5>
                <div [innerHTML]="value.description" class="font-weight-light"></div>
              </div>
            </div>

          </div>

        </ng-template>


        <ds-select *ngIf="field.enums?.length > 5" [disabled]="field.id === 'jurisdiction' && defaultJurisdiction !== undefined && defaultJurisdiction !== 'none'">
          <ng-container class="selection" *ngVar="getSelectedOption(getSelectedCcLicense(), field) as option">
            <span *ngIf="option">
              {{ option.label }}
            </span>
            <span *ngIf="!option">
              {{ 'submission.sections.ccLicense.option.select' | translate }}
            </span>
          </ng-container>
          <ng-container class="menu">
            <div class="options-select-menu overflow-auto">
              <button *ngFor="let option of field.enums"
                      class="dropdown-item"
                      (click)="selectOption(getSelectedCcLicense(), field, option)">
                {{ option.label }}
              </button>
            </div>
          </ng-container>
        </ds-select>

        <ng-container *ngIf="field.enums?.length <= 5">
     <div *ngFor="let option of field.enums"
               class="d-flex flex-row m-1">
            <div (click)="selectOption(getSelectedCcLicense(), field, option)">
              <input type="radio"
                     title="{{ option.label }}"
                     class="mr-1"
                     [checked]="isSelectedOption(getSelectedCcLicense(), field, option)">
              <span>{{ option.label }}</span>
            </div>
          </div>
        </ng-container>
      </div>
    </ng-container>
</ng-template>

<ng-template #nolicense></ng-template>

<ng-container *ngIf="getCcLicenseLink$()">
  <ng-container *ngVar="getCcLicenseLink$() | async as licenseLink">
    <div *ngIf="!licenseLink">
      <ds-themed-loading></ds-themed-loading>
    </div>
    <div *ngIf="licenseLink"
         class="mt-2 p-4 bg-light text-dark">
      <div>
        {{ 'submission.sections.ccLicense.link' | translate }}
      </div>
      <a class="license-link" href="{{ licenseLink }}" target="_blank" rel="noopener noreferrer">
        {{ licenseLink }}
      </a>
      <div class="m-2">
        <div (click)="setAccepted(!accepted)">
          <input type="checkbox"
                 title="accepted"
                 [checked]="accepted">
          <span> {{ 'submission.sections.ccLicense.confirmation' | translate }}</span>
        </div>
      </div>
    </div>
  </ng-container>
</ng-container>
